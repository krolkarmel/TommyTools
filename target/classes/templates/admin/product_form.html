<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title th:text="${formTitle}">Produkt</title>
</head>
<body style="font-family:system-ui; margin:0; color:#111; background:#fafafa;">

<div th:replace="~{fragments/navbar :: nav}"></div>

<main style="max-width:720px; margin:22px auto; padding:0 16px;">
    <h1 style="margin:10px 0;" th:text="${formTitle}">Dodaj/Edytuj</h1>

    <form th:action="${actionUrl}" method="post" th:object="${product}"
          style="background:#fff; border:1px solid #e5e5e5; border-radius:16px; padding:16px;">

        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <label style="display:block; font-weight:700; margin-bottom:6px;">Nazwa</label>
        <input th:field="*{name}" type="text" required
               style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #ddd;"/>

        <div style="height:12px;"></div>

        <label style="display:block; font-weight:700; margin-bottom:6px;">Cena (zł)</label>
        <input th:field="*{price}" type="number" step="0.01" min="0" required
               style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #ddd;"/>

        <div style="height:12px;"></div>

        <label style="display:block; font-weight:700; margin-bottom:6px;">Ścieżka do zdjęcia (imageUrl)</label>
        <input th:field="*{imageUrl}" type="text" placeholder="/images/mlotek.jpg"
               style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #ddd;"/>

        <div th:if="*{imageUrl != null && !#strings.isEmpty(imageUrl)}"
             style="margin-top:12px; border:1px solid #eee; border-radius:14px; overflow:hidden; background:#f6f6f6;">
            <img th:src="@{${product.imageUrl}}"
                 th:alt="${product.name}"
                 style="display:block; width:100%; height:220px; object-fit:contain; padding:10px;">
        </div>

        <div style="display:flex; gap:10px; margin-top:14px;">
            <button type="submit"
                    style="padding:10px 12px; border-radius:12px; border:1px solid #ddd; background:#fff; cursor:pointer;">
                Zapisz
            </button>

            <a href="/admin/products"
               style="text-decoration:none; padding:10px 12px; border-radius:12px; border:1px solid #ddd; background:#fff;">
                Anuluj
            </a>
        </div>

        <p style="margin-top:12px; color:#666; font-size:13px;">
            Wgraj plik do <code>src/main/resources/static/images/</code> i wpisz ścieżkę np. <code>/images/mlotek.jpg</code>.
        </p>
    </form>
</main>

</body>
</html>
