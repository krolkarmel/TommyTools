<nav th:fragment="nav"
     xmlns:th="http://www.thymeleaf.org"
     style="display:flex; align-items:center; gap:14px; padding:18px 18px; border-bottom:1px solid #e5e5e5;">

    <a th:href="@{/products}"
       style="display:flex; align-items:center; gap:10px; font-weight:800; text-decoration:none; color:#111;">
        <img th:src="@{/images/logo.png}" alt="TommyTools"
             style="height:64px; width:64px; object-fit:contain; border-radius:8px;">
    </a>

    <form th:action="@{/products}" method="get"
          style="display:flex; gap:8px; align-items:center; margin-left:12px;">
        <input name="q" placeholder="Szukaj..." th:value="${param.q}"
               style="padding:8px 10px; border:1px solid #ddd; border-radius:10px; min-width:240px;">
        <button type="submit"
                style="padding:8px 12px; border-radius:10px; border:1px solid #ddd; background:#fff; cursor:pointer;">
            Szukaj
        </button>
    </form>

    <div style="margin-left:auto; display:flex; align-items:center; gap:12px;">
        <a th:href="@{/cart}" style="text-decoration:none; color:#111;">
            Koszyk
            <span style="display:inline-block; min-width:22px; text-align:center; padding:2px 8px; border-radius:999px; border:1px solid #ddd;"
                  th:text="${cart != null ? cart.totalItems : 0}">0</span>
        </a>

        <span th:if="${#authorization.expression('isAuthenticated()')}"
              style="color:#555;">
      Witaj, <b th:text="${#authentication.name}">user</b>
    </span>

        <a th:href="@{/login}" th:if="${#authorization.expression('isAnonymous()')}"
           style="text-decoration:none; color:#111;">Zaloguj</a>

        <a th:href="@{/register}" th:if="${#authorization.expression('isAnonymous()')}"
           style="text-decoration:none; color:#111;">Rejestracja</a>

        <form th:action="@{/logout}" method="post"
              th:if="${#authorization.expression('isAuthenticated()')}"
              style="margin:0;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit"
                    style="padding:8px 12px; border-radius:10px; border:1px solid #ddd; background:#fff; cursor:pointer;">
                Wyloguj
            </button>
        </form>
    </div>
</nav>
