<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Produkty</title>
</head>
<body style="font-family:system-ui; margin:0; color:#111; background:#fafafa;">

<div th:replace="~{fragments/navbar :: nav}"></div>

<main style="max-width:980px; margin:22px auto; padding:0 16px;">
    <h1 style="margin:10px 0 6px;">Produkty</h1>
    <p style="margin:0 0 18px; color:#666;">
        Wyszukuj w pasku u góry albo przeglądaj listę.
    </p>

    <div th:if="${products == null || #lists.isEmpty(products)}"
         style="padding:18px; border:1px solid #e5e5e5; border-radius:16px; background:#fff;">
        Brak produktów do wyświetlenia.
    </div>

    <div th:if="${products != null && !#lists.isEmpty(products)}"
         style="display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap:14px;">
        <div th:each="p : ${products}"
             style="background:#fff; border:1px solid #e5e5e5; border-radius:16px; padding:14px;">

            <div style="display:flex; justify-content:space-between; gap:10px; align-items:center;">
                <div style="font-weight:700;" th:text="${p.name}">Nazwa</div>
                <div style="font-weight:800;" th:text="${p.price} + ' zł'">0 zł</div>
            </div>

            <!-- ✅ OBRAZEK PRODUKTU -->
            <div th:if="${p.imageUrl != null && !#strings.isEmpty(p.imageUrl)}"
                 style="margin-top:10px; border:1px solid #eee; border-radius:14px; overflow:hidden; background:#f6f6f6;">
                <img th:src="${p.imageUrl}"
                     th:alt="${p.name}"
                     style="display:block; width:100%; height:160px; object-fit:contain; padding:10px;">
            </div>

            <form th:action="@{/cart/add}" method="post" style="margin-top:12px;">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="id" th:value="${p.id}"/>
                <button type="submit"
                        style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #ddd; background:#fff; cursor:pointer;">
                    Dodaj do koszyka
                </button>
            </form>
        </div>
    </div>
</main>

</body>
</html>
